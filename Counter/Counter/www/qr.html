<html>

<head>
    <title>產生QRcode</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="產生QRcode">
    <meta name="description" content="">
    <meta name="keywords" content="HTML,CSS,XML,JavaScript">
    <meta name="author" content="Hege Refsnes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="qrcode.js"></script>
    <script>
    // Tabs
    function openLink(evt, linkName) {
        var i, x, tablinks;
        x = document.getElementsByClassName("myLink");
        for (i = 0; i < x.length; i++) {
            x[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablink");
        for (i = 0; i < x.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" w3-red", "");
        }
        document.getElementById(linkName).style.display = "block";
        evt.currentTarget.className += " w3-red";
    }
    // Click on the first tablink on load
    document.getElementsByClassName("tablink")[0].click();

    // Accordion
    function myFunction(id) {
        var x = document.getElementById(id);
        if (x.className.indexOf("w3-show") == -1) {
            x.className += " w3-show";
            x.previousElementSibling.className += " w3-theme-d1";
        } else {
            x.className = x.className.replace("w3-show", "");
            x.previousElementSibling.className =
                x.previousElementSibling.className.replace(" w3-theme-d1", "");
        }
    }


    function POST() {


    }
    </script>

    <body><br><br><br><br><br><br>
        <div class="w3-display-middle" style="width:90%">
           
                <div class="w3-col">
                    <label>病歷號碼：</label>
                    <input id="id" class="w3-input w3-border" type="text" style="width:80%" />
                </div>
              
                <div class="w3-card-2 w3-round ">
                    <div class="w3-accordion ">
                        <button onclick="myFunction('place')" class="w3-btn-block w3-theme-l1 w3-left-align">
                            <i class="fa fa-circle-o-notch fa-fw w3-margin-right"></i>選擇區域</button>
                        <select id="place" class="w3-accordion-content w3-container">
                            <!-- 要從資料庫帶入資料-->
                            <option class="w3-padding" value="NE">神經電療區</option>
                            <option class="w3-padding" value="NS">神經運動區</option>
                            <option class="w3-padding" value="OT">骨科職能治療區</option>
                            <option class="w3-padding" value="OS">骨科運動區</option>
                            <option class="w3-padding" value="OE">骨科電療區</option>
							<option class="w3-padding" value="OT">骨科牽引區</option>
						</select>
                    </div>
                </div>
                 <div class="w3-col">
                    <label>療程號碼：</label>
                    <input id="num" class="w3-input w3-border" type="text" style="width:80%" />
                </div>
                <br>
                <div class="w3-col" id="myDiv">
                    <label>期限日期：</label>
                    <script language="javascript" class="w3-border">
                    function ShowDate() {
                        var Today = new Date();　
                        var EndDate = Today.getFullYear() + " 年 " + (Today.getMonth() + 2) + " 月 " + Today.getDate() + " 日";

                        document.getElementById("date").value = EndDate;
                    }
                    </script>
                    <button onclick="ShowDate()">產生預設</button>
                    <input class="w3-input w3-border" type="text" value="" id="date">
                    <button onclick=" makeCode()">
                        <i class=" w3-center">確定</i>
                    </button>
                
            </div>
            
            <div id="qrcode" class="w3-col w3-center" style="width:100px; height:100px;  margin-top:15px;">
            </div>
        </div>
        <script type="text/javascript">
        var qrcode = new QRCode(document.getElementById("qrcode"), {
            width: 100,
            height: 100
        });

        function makeCode() {
            var elText = document.getElementById("id");
           
            var elText2 = document.getElementById("date");
            var elText3 = document.getElementById("place");
            var elText4 = document.getElementById("num");

            /**if (!elText.value) {
                alert("Input a text");
                elText.focus();
                return;
            }**/
            var s = elText.value + "\n" + elText2.value+ "\n" + elText3.value+ "\n" + elText4.value;
            qrcode.makeCode(s);
        }

        //makeCode();

        $("#id,#date,#place,#num").on("blur", function() {
            makeCode();
        }).on("keydown", function(e) {
            if (e.keyCode == 13) {
                makeCode();
            }
        });
        </script>
    </body>
